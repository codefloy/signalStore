import { Injector, effect, inject, } from '@angular/core';
import { assertInjector } from 'ngxtension/assert-injector';
export function injectAutoEffect(injector) {
    return assertInjector(injectAutoEffect, injector, () => {
        const assertedInjector = inject(Injector);
        const injectorOptions = { injector: assertedInjector };
        return (autoEffectCallback, options = {}) => {
            return effect((onCleanup) => {
                const maybeCleanup = autoEffectCallback(assertedInjector);
                if (typeof maybeCleanup === 'function') {
                    onCleanup(() => maybeCleanup());
                }
            }, Object.assign(options, injectorOptions));
        };
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0by1lZmZlY3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL25neHRlbnNpb24vYXV0by1lZmZlY3Qvc3JjL2F1dG8tZWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTixRQUFRLEVBQ1IsTUFBTSxFQUNOLE1BQU0sR0FFTixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFNUQsTUFBTSxVQUFVLGdCQUFnQixDQUFDLFFBQW1CO0lBQ25ELE9BQU8sY0FBYyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUU7UUFDdEQsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUMsTUFBTSxlQUFlLEdBQUcsRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQztRQUN2RCxPQUFPLENBQ04sa0JBQXlFLEVBQ3pFLFVBQWlELEVBQUUsRUFDbEQsRUFBRTtZQUNILE9BQU8sTUFBTSxDQUNaLENBQUMsU0FBUyxFQUFFLEVBQUU7Z0JBQ2IsTUFBTSxZQUFZLEdBQUcsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFDMUQsSUFBSSxPQUFPLFlBQVksS0FBSyxVQUFVLEVBQUUsQ0FBQztvQkFDeEMsU0FBUyxDQUFDLEdBQUcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7Z0JBQ2pDLENBQUM7WUFDRixDQUFDLEVBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsZUFBZSxDQUFDLENBQ3ZDLENBQUM7UUFDSCxDQUFDLENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRJbmplY3Rvcixcblx0ZWZmZWN0LFxuXHRpbmplY3QsXG5cdHR5cGUgQ3JlYXRlRWZmZWN0T3B0aW9ucyxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBhc3NlcnRJbmplY3RvciB9IGZyb20gJ25neHRlbnNpb24vYXNzZXJ0LWluamVjdG9yJztcblxuZXhwb3J0IGZ1bmN0aW9uIGluamVjdEF1dG9FZmZlY3QoaW5qZWN0b3I/OiBJbmplY3Rvcikge1xuXHRyZXR1cm4gYXNzZXJ0SW5qZWN0b3IoaW5qZWN0QXV0b0VmZmVjdCwgaW5qZWN0b3IsICgpID0+IHtcblx0XHRjb25zdCBhc3NlcnRlZEluamVjdG9yID0gaW5qZWN0KEluamVjdG9yKTtcblx0XHRjb25zdCBpbmplY3Rvck9wdGlvbnMgPSB7IGluamVjdG9yOiBhc3NlcnRlZEluamVjdG9yIH07XG5cdFx0cmV0dXJuIChcblx0XHRcdGF1dG9FZmZlY3RDYWxsYmFjazogKGF1dG9FZmZlY3RJbmplY3RvcjogSW5qZWN0b3IpID0+IHZvaWQgfCAoKCkgPT4gdm9pZCksXG5cdFx0XHRvcHRpb25zOiBPbWl0PENyZWF0ZUVmZmVjdE9wdGlvbnMsICdpbmplY3Rvcic+ID0ge30sXG5cdFx0KSA9PiB7XG5cdFx0XHRyZXR1cm4gZWZmZWN0KFxuXHRcdFx0XHQob25DbGVhbnVwKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgbWF5YmVDbGVhbnVwID0gYXV0b0VmZmVjdENhbGxiYWNrKGFzc2VydGVkSW5qZWN0b3IpO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgbWF5YmVDbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRvbkNsZWFudXAoKCkgPT4gbWF5YmVDbGVhbnVwKCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0T2JqZWN0LmFzc2lnbihvcHRpb25zLCBpbmplY3Rvck9wdGlvbnMpLFxuXHRcdFx0KTtcblx0XHR9O1xuXHR9KTtcbn1cbiJdfQ==