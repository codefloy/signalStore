import { concatMap, timer } from 'rxjs';
// source: https://netbasal.com/use-rxjs-to-modify-app-behavior-based-on-page-visibility-ce499c522be4
/**
 * RxJS operator to apply to a stream that you want to poll every "period" milliseconds after an optional "initialDelay" milliseconds.
 *
 * @param period - Indicates the delay between 2 polls.
 * @param initialDelay - Indicates the delay before the first poll occurs.
 * @example This example shows how to do an HTTP GET every 5 seconds:
 * ```ts
 * http.get('http://api').pipe(poll(5000)).subscribe(result => {});
 * ```
 * @public
 */
export function poll(period, initialDelay = 0) {
    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument
    return (source) => {
        return timer(initialDelay, period).pipe(concatMap(() => source));
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9sbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2xpYnMvbmd4dGVuc2lvbi9wb2xsL3NyYy9wb2xsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXdDLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUM5RSxxR0FBcUc7QUFFckc7Ozs7Ozs7Ozs7R0FVRztBQUNILE1BQU0sVUFBVSxJQUFJLENBQ25CLE1BQWMsRUFDZCxZQUFZLEdBQUcsQ0FBQztJQUVoQixpRUFBaUU7SUFDakUsT0FBTyxDQUFDLE1BQXFCLEVBQUUsRUFBRTtRQUNoQyxPQUFPLEtBQUssQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ2xFLENBQUMsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25jYXRNYXAsIE1vbm9UeXBlT3BlcmF0b3JGdW5jdGlvbiwgT2JzZXJ2YWJsZSwgdGltZXIgfSBmcm9tICdyeGpzJztcbi8vIHNvdXJjZTogaHR0cHM6Ly9uZXRiYXNhbC5jb20vdXNlLXJ4anMtdG8tbW9kaWZ5LWFwcC1iZWhhdmlvci1iYXNlZC1vbi1wYWdlLXZpc2liaWxpdHktY2U0OTljNTIyYmU0XG5cbi8qKlxuICogUnhKUyBvcGVyYXRvciB0byBhcHBseSB0byBhIHN0cmVhbSB0aGF0IHlvdSB3YW50IHRvIHBvbGwgZXZlcnkgXCJwZXJpb2RcIiBtaWxsaXNlY29uZHMgYWZ0ZXIgYW4gb3B0aW9uYWwgXCJpbml0aWFsRGVsYXlcIiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHBlcmlvZCAtIEluZGljYXRlcyB0aGUgZGVsYXkgYmV0d2VlbiAyIHBvbGxzLlxuICogQHBhcmFtIGluaXRpYWxEZWxheSAtIEluZGljYXRlcyB0aGUgZGVsYXkgYmVmb3JlIHRoZSBmaXJzdCBwb2xsIG9jY3Vycy5cbiAqIEBleGFtcGxlIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gZG8gYW4gSFRUUCBHRVQgZXZlcnkgNSBzZWNvbmRzOlxuICogYGBgdHNcbiAqIGh0dHAuZ2V0KCdodHRwOi8vYXBpJykucGlwZShwb2xsKDUwMDApKS5zdWJzY3JpYmUocmVzdWx0ID0+IHt9KTtcbiAqIGBgYFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gcG9sbDxUPihcblx0cGVyaW9kOiBudW1iZXIsXG5cdGluaXRpYWxEZWxheSA9IDAsXG4pOiBNb25vVHlwZU9wZXJhdG9yRnVuY3Rpb248VD4ge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxuXHRyZXR1cm4gKHNvdXJjZTogT2JzZXJ2YWJsZTxUPikgPT4ge1xuXHRcdHJldHVybiB0aW1lcihpbml0aWFsRGVsYXksIHBlcmlvZCkucGlwZShjb25jYXRNYXAoKCkgPT4gc291cmNlKSk7XG5cdH07XG59XG4iXX0=